{"ast":null,"code":"import _toConsumableArray from \"/Users/nathan.schroeder/Documents/dev/template/streamlit_thoughtspot/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/nathan.schroeder/Documents/dev/template/streamlit_thoughtspot/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/nathan.schroeder/Documents/dev/template/streamlit_thoughtspot/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"/Users/nathan.schroeder/Documents/dev/template/streamlit_thoughtspot/frontend/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"/Users/nathan.schroeder/Documents/dev/template/streamlit_thoughtspot/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/nathan.schroeder/Documents/dev/template/streamlit_thoughtspot/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/nathan.schroeder/Documents/dev/template/streamlit_thoughtspot/frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Param } from '../types';\nimport { getQueryParamString } from '../utils';\nimport { TsEmbed } from './ts-embed';\n/**\n * Embed ThoughtSpot search bar\n *\n * @Category Search Embed\n * @version: SDK: 1.18.0 | ThoughtSpot: 8.10.0.cl, 9.0.1-sw\n */\n\nexport var SearchBarEmbed = /*#__PURE__*/function (_TsEmbed) {\n  _inherits(SearchBarEmbed, _TsEmbed);\n\n  var _super = _createSuper(SearchBarEmbed);\n\n  function SearchBarEmbed(domSelector, viewConfig) {\n    var _this;\n\n    _classCallCheck(this, SearchBarEmbed);\n\n    _this = _super.call(this, domSelector);\n    _this.viewConfig = viewConfig;\n    return _this;\n  }\n  /**\n   * Construct the URL of the embedded ThoughtSpot search to be\n   * loaded in the iframe\n   * @param dataSources A list of data source GUIDs\n   */\n\n\n  _createClass(SearchBarEmbed, [{\n    key: \"getIFrameSrc\",\n    value: function getIFrameSrc(dataSources) {\n      var _a;\n\n      var searchOptions = this.viewConfig.searchOptions;\n      var path = 'search-bar-embed';\n      var queryParams = this.getBaseQueryParams();\n      queryParams[Param.HideActions] = _toConsumableArray((_a = queryParams[Param.HideActions]) !== null && _a !== void 0 ? _a : []);\n\n      if (dataSources && dataSources.length) {\n        queryParams[Param.DataSources] = JSON.stringify(dataSources);\n      }\n\n      if (searchOptions === null || searchOptions === void 0 ? void 0 : searchOptions.searchTokenString) {\n        queryParams[Param.searchTokenString] = encodeURIComponent(searchOptions.searchTokenString);\n\n        if (searchOptions.executeSearch) {\n          queryParams[Param.executeSearch] = true;\n        }\n      }\n\n      queryParams[Param.UseLastSelectedDataSource] = false;\n      queryParams[Param.searchEmbed] = true;\n      var query = '';\n      var queryParamsString = getQueryParamString(queryParams, true);\n\n      if (queryParamsString) {\n        query = \"?\".concat(queryParamsString);\n      }\n\n      var tsPostHashParams = this.getThoughtSpotPostUrlParams();\n      return \"\".concat(this.getEmbedBasePath(query), \"/\").concat(path).concat(tsPostHashParams);\n    }\n    /**\n     * Render the embedded ThoughtSpot search\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      _get(_getPrototypeOf(SearchBarEmbed.prototype), \"render\", this).call(this);\n\n      var dataSources = this.viewConfig.dataSources;\n      var src = this.getIFrameSrc(dataSources);\n      this.renderIFrame(src, this.viewConfig.frameParams);\n      return this;\n    }\n  }]);\n\n  return SearchBarEmbed;\n}(TsEmbed);","map":{"version":3,"mappings":";;;;;;;AAAA,SAAsBA,KAAtB,QAAuD,UAAvD;AACA,SAASC,mBAAT,QAAoC,UAApC;AACA,SAASC,OAAT,QAAwB,YAAxB;AAuBA;;;;;;;AAMA,WAAaC,cAAb;EAAA;;EAAA;;EAMI,wBAAYC,WAAZ,EAAiCC,UAAjC,EAAgE;IAAA;;IAAA;;IAC5D,0BAAMD,WAAN;IACA,MAAKC,UAAL,GAAkBA,UAAlB;IAF4D;EAG/D;EAED;;;;;;;EAXJ;IAAA;IAAA,OAgBY,sBAAaC,WAAb,EAAmC;;;MACvC,IAAQC,aAAR,GAA0B,KAAKF,UAA/B,CAAQE,aAAR;MACA,IAAMC,IAAI,GAAG,kBAAb;MACA,IAAMC,WAAW,GAAG,KAAKC,kBAAL,EAApB;MAEAD,WAAW,CAACT,KAAK,CAACW,WAAP,CAAX,sBACQ,iBAAW,CAACX,KAAK,CAACW,WAAP,CAAX,MAA8B,IAA9B,IAA8BC,aAA9B,GAA8BA,EAA9B,GAAkC,EAD1C;;MAIA,IAAIN,WAAW,IAAIA,WAAW,CAACO,MAA/B,EAAuC;QACnCJ,WAAW,CAACT,KAAK,CAACc,WAAP,CAAX,GAAiCC,IAAI,CAACC,SAAL,CAAeV,WAAf,CAAjC;MACH;;MACD,IAAIC,aAAa,SAAb,iBAAa,WAAb,GAAa,MAAb,gBAAa,CAAEU,iBAAnB,EAAsC;QAClCR,WAAW,CAACT,KAAK,CAACiB,iBAAP,CAAX,GAAuCC,kBAAkB,CACrDX,aAAa,CAACU,iBADuC,CAAzD;;QAIA,IAAIV,aAAa,CAACY,aAAlB,EAAiC;UAC7BV,WAAW,CAACT,KAAK,CAACmB,aAAP,CAAX,GAAmC,IAAnC;QACH;MACJ;;MAEDV,WAAW,CAACT,KAAK,CAACoB,yBAAP,CAAX,GAA+C,KAA/C;MACAX,WAAW,CAACT,KAAK,CAACqB,WAAP,CAAX,GAAiC,IAAjC;MACA,IAAIC,KAAK,GAAG,EAAZ;MACA,IAAMC,iBAAiB,GAAGtB,mBAAmB,CAACQ,WAAD,EAAc,IAAd,CAA7C;;MACA,IAAIc,iBAAJ,EAAuB;QACnBD,KAAK,cAAOC,iBAAP,CAAL;MACH;;MACD,IAAMC,gBAAgB,GAAG,KAAKC,2BAAL,EAAzB;MAEA,iBAAU,KAAKC,gBAAL,CAAsBJ,KAAtB,CAAV,cAA0Cd,IAA1C,SAAiDgB,gBAAjD;IACH;IAED;;;;EAlDJ;IAAA;IAAA,OAqDW,kBAAM;MACT;;MACA,IAAQlB,WAAR,GAAwB,KAAKD,UAA7B,CAAQC,WAAR;MAEA,IAAMqB,GAAG,GAAG,KAAKC,YAAL,CAAkBtB,WAAlB,CAAZ;MACA,KAAKuB,YAAL,CAAkBF,GAAlB,EAAuB,KAAKtB,UAAL,CAAgByB,WAAvC;MACA,OAAO,IAAP;IACH;EA5DL;;EAAA;AAAA,EAAoC5B,OAApC","names":["Param","getQueryParamString","TsEmbed","SearchBarEmbed","domSelector","viewConfig","dataSources","searchOptions","path","queryParams","getBaseQueryParams","HideActions","_a","length","DataSources","JSON","stringify","searchTokenString","encodeURIComponent","executeSearch","UseLastSelectedDataSource","searchEmbed","query","queryParamsString","tsPostHashParams","getThoughtSpotPostUrlParams","getEmbedBasePath","src","getIFrameSrc","renderIFrame","frameParams"],"sourceRoot":"","sources":["../../../src/embed/search-bar.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}