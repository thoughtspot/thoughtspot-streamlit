{"ast":null,"code":"import _asyncToGenerator from \"/Users/nathan.schroeder/Documents/dev/template/streamlit_thoughtspot/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, catch: function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\nimport { initMixpanel } from './mixpanel-service';\nimport { AuthType, EmbedEvent } from './types';\nimport { getDOMNode, getRedirectUrl } from './utils'; // eslint-disable-next-line import/no-cycle\n\nimport { fetchSessionInfoService, fetchAuthTokenService, fetchAuthService, fetchBasicAuthService, fetchLogoutService, fetchAuthPostService } from './utils/authService'; // eslint-disable-next-line import/no-mutable-exports\n\nexport var loggedInStatus = false; // eslint-disable-next-line import/no-mutable-exports\n\nexport var samlAuthWindow = null; // eslint-disable-next-line import/no-mutable-exports\n\nexport var samlCompletionPromise = null;\nvar sessionInfo = null;\nvar releaseVersion = '';\nexport var SSO_REDIRECTION_MARKER_GUID = '5e16222e-ef02-43e9-9fbd-24226bf3ce5b';\nexport var EndPoints = {\n  AUTH_VERIFICATION: '/callosum/v1/session/info',\n  SAML_LOGIN_TEMPLATE: function SAML_LOGIN_TEMPLATE(targetUrl) {\n    return \"/callosum/v1/saml/login?targetURLPath=\".concat(targetUrl);\n  },\n  OIDC_LOGIN_TEMPLATE: function OIDC_LOGIN_TEMPLATE(targetUrl) {\n    return \"/callosum/v1/oidc/login?targetURLPath=\".concat(targetUrl);\n  },\n  TOKEN_LOGIN: '/callosum/v1/session/login/token',\n  BASIC_LOGIN: '/callosum/v1/session/login',\n  LOGOUT: '/callosum/v1/session/logout'\n};\nexport var AuthFailureType;\n\n(function (AuthFailureType) {\n  AuthFailureType[\"SDK\"] = \"SDK\";\n  AuthFailureType[\"NO_COOKIE_ACCESS\"] = \"NO_COOKIE_ACCESS\";\n  AuthFailureType[\"EXPIRY\"] = \"EXPIRY\";\n  AuthFailureType[\"OTHER\"] = \"OTHER\";\n})(AuthFailureType || (AuthFailureType = {}));\n\nexport var AuthStatus;\n\n(function (AuthStatus) {\n  /**\n   * Emits when the SDK fails to authenticate\n   */\n  AuthStatus[\"FAILURE\"] = \"FAILURE\";\n  /**\n   * Emits when the SDK authenticates successfully\n   */\n\n  AuthStatus[\"SDK_SUCCESS\"] = \"SDK_SUCCESS\";\n  /**\n   * Emits when the app sends an authentication success message\n   */\n\n  AuthStatus[\"SUCCESS\"] = \"SUCCESS\";\n  /**\n   * Emits when a user logs out\n   */\n\n  AuthStatus[\"LOGOUT\"] = \"LOGOUT\";\n})(AuthStatus || (AuthStatus = {}));\n/**\n * Check if we are logged into the ThoughtSpot cluster\n * @param thoughtSpotHost The ThoughtSpot cluster hostname or IP\n */\n\n\nfunction isLoggedIn(_x) {\n  return _isLoggedIn.apply(this, arguments);\n}\n/**\n * Return releaseVersion if available\n */\n\n\nfunction _isLoggedIn() {\n  _isLoggedIn = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(thoughtSpotHost) {\n    var authVerificationUrl, response, sessionInfoResp;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            authVerificationUrl = \"\".concat(thoughtSpotHost).concat(EndPoints.AUTH_VERIFICATION);\n            response = null;\n            _context8.prev = 2;\n            _context8.next = 5;\n            return fetchSessionInfoService(authVerificationUrl);\n\n          case 5:\n            response = _context8.sent;\n            _context8.next = 8;\n            return response.json();\n\n          case 8:\n            sessionInfoResp = _context8.sent;\n            releaseVersion = sessionInfoResp.releaseVersion;\n            _context8.next = 15;\n            break;\n\n          case 12:\n            _context8.prev = 12;\n            _context8.t0 = _context8[\"catch\"](2);\n            return _context8.abrupt(\"return\", false);\n\n          case 15:\n            return _context8.abrupt(\"return\", response.status === 200);\n\n          case 16:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8, null, [[2, 12]]);\n  }));\n  return _isLoggedIn.apply(this, arguments);\n}\n\nexport function getReleaseVersion() {\n  return releaseVersion;\n}\n/**\n * Return sessionInfo if available else make a loggedIn check to fetch the sessionInfo\n */\n\nexport function getSessionInfo() {\n  return sessionInfo;\n}\nexport function initSession(sessionDetails) {\n  sessionInfo = sessionDetails;\n  initMixpanel(sessionInfo);\n}\nvar DUPLICATE_TOKEN_ERR = 'Duplicate token, please issue a new token every time getAuthToken callback is called.' + 'See https://developers.thoughtspot.com/docs/?pageid=embed-auth#trusted-auth-embed for more details.';\nvar prevAuthToken = null;\n\nfunction alertForDuplicateToken(authtoken) {\n  if (prevAuthToken === authtoken) {\n    // eslint-disable-next-line no-alert\n    alert(DUPLICATE_TOKEN_ERR);\n    throw new Error(DUPLICATE_TOKEN_ERR);\n  }\n\n  prevAuthToken = authtoken;\n}\n/**\n * Check if we are stuck at the SSO redirect URL\n */\n\n\nfunction isAtSSORedirectUrl() {\n  return window.location.href.indexOf(SSO_REDIRECTION_MARKER_GUID) >= 0;\n}\n/**\n * Remove the SSO redirect URL marker\n */\n\n\nfunction removeSSORedirectUrlMarker() {\n  // Note (sunny): This will leave a # around even if it was not in the URL\n  // to begin with. Trying to remove the hash by changing window.location will reload\n  // the page which we don't want. We'll live with adding an unnecessary hash to the\n  // parent page URL until we find any use case where that creates an issue.\n  window.location.hash = window.location.hash.replace(SSO_REDIRECTION_MARKER_GUID, '');\n}\n/**\n * Perform token based authentication\n * @param embedConfig The embed configuration\n */\n\n\nexport var doTokenAuth = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(embedConfig) {\n    var thoughtSpotHost, username, authEndpoint, getAuthToken, authToken, response, resp;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            thoughtSpotHost = embedConfig.thoughtSpotHost, username = embedConfig.username, authEndpoint = embedConfig.authEndpoint, getAuthToken = embedConfig.getAuthToken;\n\n            if (!(!authEndpoint && !getAuthToken)) {\n              _context.next = 3;\n              break;\n            }\n\n            throw new Error('Either auth endpoint or getAuthToken function must be provided');\n\n          case 3:\n            _context.next = 5;\n            return isLoggedIn(thoughtSpotHost);\n\n          case 5:\n            loggedInStatus = _context.sent;\n\n            if (loggedInStatus) {\n              _context.next = 37;\n              break;\n            }\n\n            authToken = null;\n\n            if (!getAuthToken) {\n              _context.next = 15;\n              break;\n            }\n\n            _context.next = 11;\n            return getAuthToken();\n\n          case 11:\n            authToken = _context.sent;\n            alertForDuplicateToken(authToken);\n            _context.next = 21;\n            break;\n\n          case 15:\n            _context.next = 17;\n            return fetchAuthTokenService(authEndpoint);\n\n          case 17:\n            response = _context.sent;\n            _context.next = 20;\n            return response.text();\n\n          case 20:\n            authToken = _context.sent;\n\n          case 21:\n            _context.prev = 21;\n            _context.next = 24;\n            return fetchAuthPostService(thoughtSpotHost, username, authToken);\n\n          case 24:\n            resp = _context.sent;\n            _context.next = 32;\n            break;\n\n          case 27:\n            _context.prev = 27;\n            _context.t0 = _context[\"catch\"](21);\n            _context.next = 31;\n            return fetchAuthService(thoughtSpotHost, username, authToken);\n\n          case 31:\n            resp = _context.sent;\n\n          case 32:\n            // token login issues a 302 when successful\n            loggedInStatus = resp.ok || resp.type === 'opaqueredirect';\n\n            if (!(loggedInStatus && embedConfig.detectCookieAccessSlow)) {\n              _context.next = 37;\n              break;\n            }\n\n            _context.next = 36;\n            return isLoggedIn(thoughtSpotHost);\n\n          case 36:\n            loggedInStatus = _context.sent;\n\n          case 37:\n            return _context.abrupt(\"return\", loggedInStatus);\n\n          case 38:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[21, 27]]);\n  }));\n\n  return function doTokenAuth(_x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n/**\n * Perform basic authentication to the ThoughtSpot cluster using the cluster\n * credentials.\n *\n * Warning: This feature is primarily intended for developer testing. It is\n * strongly advised not to use this authentication method in production.\n * @param embedConfig The embed configuration\n */\n\nexport var doBasicAuth = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(embedConfig) {\n    var thoughtSpotHost, username, password, loggedIn, response;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            thoughtSpotHost = embedConfig.thoughtSpotHost, username = embedConfig.username, password = embedConfig.password;\n            _context2.next = 3;\n            return isLoggedIn(thoughtSpotHost);\n\n          case 3:\n            loggedIn = _context2.sent;\n\n            if (loggedIn) {\n              _context2.next = 15;\n              break;\n            }\n\n            _context2.next = 7;\n            return fetchBasicAuthService(thoughtSpotHost, username, password);\n\n          case 7:\n            response = _context2.sent;\n            loggedInStatus = response.ok;\n\n            if (!embedConfig.detectCookieAccessSlow) {\n              _context2.next = 13;\n              break;\n            }\n\n            _context2.next = 12;\n            return isLoggedIn(thoughtSpotHost);\n\n          case 12:\n            loggedInStatus = _context2.sent;\n\n          case 13:\n            _context2.next = 16;\n            break;\n\n          case 15:\n            loggedInStatus = true;\n\n          case 16:\n            return _context2.abrupt(\"return\", loggedInStatus);\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function doBasicAuth(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nfunction samlPopupFlow(_x4, _x5, _x6) {\n  return _samlPopupFlow.apply(this, arguments);\n}\n/**\n * Perform SAML authentication\n * @param embedConfig The embed configuration\n */\n\n\nfunction _samlPopupFlow() {\n  _samlPopupFlow = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(ssoURL, triggerContainer, triggerText) {\n    var containerEl, authElem;\n    return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            containerEl = getDOMNode(triggerContainer);\n            containerEl.innerHTML = '<button id=\"ts-auth-btn\" class=\"ts-auth-btn\" style=\"margin: auto;\"></button>';\n            authElem = document.getElementById('ts-auth-btn');\n            authElem.textContent = triggerText;\n            samlCompletionPromise = samlCompletionPromise || new Promise(function (resolve, reject) {\n              window.addEventListener('message', function (e) {\n                if (e.data.type === EmbedEvent.SAMLComplete) {\n                  e.source.close();\n                  resolve();\n                }\n              });\n            });\n            authElem.addEventListener('click', function () {\n              if (samlAuthWindow === null || samlAuthWindow.closed) {\n                samlAuthWindow = window.open(ssoURL, '_blank', 'location=no,height=570,width=520,scrollbars=yes,status=yes');\n              } else {\n                samlAuthWindow.focus();\n              }\n            }, {\n              once: true\n            });\n            return _context9.abrupt(\"return\", samlCompletionPromise);\n\n          case 7:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n  return _samlPopupFlow.apply(this, arguments);\n}\n\nvar doSSOAuth = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(embedConfig, ssoEndPoint) {\n    var thoughtSpotHost, loggedIn, ssoURL;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            thoughtSpotHost = embedConfig.thoughtSpotHost;\n            _context3.next = 3;\n            return isLoggedIn(thoughtSpotHost);\n\n          case 3:\n            loggedIn = _context3.sent;\n\n            if (!loggedIn) {\n              _context3.next = 8;\n              break;\n            }\n\n            if (isAtSSORedirectUrl()) {\n              removeSSORedirectUrlMarker();\n            }\n\n            loggedInStatus = true;\n            return _context3.abrupt(\"return\");\n\n          case 8:\n            if (!isAtSSORedirectUrl()) {\n              _context3.next = 12;\n              break;\n            }\n\n            removeSSORedirectUrlMarker();\n            loggedInStatus = false;\n            return _context3.abrupt(\"return\");\n\n          case 12:\n            ssoURL = \"\".concat(thoughtSpotHost).concat(ssoEndPoint);\n\n            if (!(embedConfig.noRedirect || embedConfig.inPopup)) {\n              _context3.next = 18;\n              break;\n            }\n\n            _context3.next = 16;\n            return samlPopupFlow(ssoURL, embedConfig.authTriggerContainer, embedConfig.authTriggerText);\n\n          case 16:\n            loggedInStatus = true;\n            return _context3.abrupt(\"return\");\n\n          case 18:\n            window.location.href = ssoURL;\n\n          case 19:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function doSSOAuth(_x7, _x8) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport var doSamlAuth = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(embedConfig) {\n    var thoughtSpotHost, ssoRedirectUrl, ssoEndPoint;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            thoughtSpotHost = embedConfig.thoughtSpotHost; // redirect for SSO, when the SSO authentication is done, this page will be loaded\n            // again and the same JS will execute again.\n\n            ssoRedirectUrl = embedConfig.noRedirect ? \"\".concat(thoughtSpotHost, \"/v2/#/embed/saml-complete\") : getRedirectUrl(window.location.href, SSO_REDIRECTION_MARKER_GUID, embedConfig.redirectPath); // bring back the page to the same URL\n\n            ssoEndPoint = \"\".concat(EndPoints.SAML_LOGIN_TEMPLATE(encodeURIComponent(ssoRedirectUrl)));\n            _context4.next = 5;\n            return doSSOAuth(embedConfig, ssoEndPoint);\n\n          case 5:\n            return _context4.abrupt(\"return\", loggedInStatus);\n\n          case 6:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function doSamlAuth(_x9) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var doOIDCAuth = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(embedConfig) {\n    var thoughtSpotHost, ssoRedirectUrl, ssoEndPoint;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            thoughtSpotHost = embedConfig.thoughtSpotHost; // redirect for SSO, when the SSO authentication is done, this page will be loaded\n            // again and the same JS will execute again.\n\n            ssoRedirectUrl = embedConfig.noRedirect || embedConfig.inPopup ? \"\".concat(thoughtSpotHost, \"/v2/#/embed/saml-complete\") : getRedirectUrl(window.location.href, SSO_REDIRECTION_MARKER_GUID, embedConfig.redirectPath); // bring back the page to the same URL\n\n            ssoEndPoint = \"\".concat(EndPoints.OIDC_LOGIN_TEMPLATE(encodeURIComponent(ssoRedirectUrl)));\n            _context5.next = 5;\n            return doSSOAuth(embedConfig, ssoEndPoint);\n\n          case 5:\n            return _context5.abrupt(\"return\", loggedInStatus);\n\n          case 6:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function doOIDCAuth(_x10) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var logout = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(embedConfig) {\n    var thoughtSpotHost, response;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            thoughtSpotHost = embedConfig.thoughtSpotHost;\n            _context6.next = 3;\n            return fetchLogoutService(thoughtSpotHost);\n\n          case 3:\n            response = _context6.sent;\n            loggedInStatus = false;\n            return _context6.abrupt(\"return\", loggedInStatus);\n\n          case 6:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function logout(_x11) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n/**\n * Perform authentication on the ThoughtSpot cluster\n * @param embedConfig The embed configuration\n */\n\nexport var authenticate = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(embedConfig) {\n    var authType;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            authType = embedConfig.authType;\n            _context7.t0 = authType;\n            _context7.next = _context7.t0 === AuthType.SSO ? 4 : _context7.t0 === AuthType.SAMLRedirect ? 4 : _context7.t0 === AuthType.SAML ? 4 : _context7.t0 === AuthType.OIDC ? 5 : _context7.t0 === AuthType.OIDCRedirect ? 5 : _context7.t0 === AuthType.AuthServer ? 6 : _context7.t0 === AuthType.TrustedAuthToken ? 6 : _context7.t0 === AuthType.Basic ? 7 : 8;\n            break;\n\n          case 4:\n            return _context7.abrupt(\"return\", doSamlAuth(embedConfig));\n\n          case 5:\n            return _context7.abrupt(\"return\", doOIDCAuth(embedConfig));\n\n          case 6:\n            return _context7.abrupt(\"return\", doTokenAuth(embedConfig));\n\n          case 7:\n            return _context7.abrupt(\"return\", doBasicAuth(embedConfig));\n\n          case 8:\n            return _context7.abrupt(\"return\", Promise.resolve(true));\n\n          case 9:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function authenticate(_x12) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n/**\n * Check if we are authenticated to the ThoughtSpot cluster\n */\n\nexport var isAuthenticated = function isAuthenticated() {\n  return loggedInStatus;\n};","map":{"version":3,"mappings":"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","names":["initMixpanel","AuthType","EmbedEvent","getDOMNode","getRedirectUrl","fetchSessionInfoService","fetchAuthTokenService","fetchAuthService","fetchBasicAuthService","fetchLogoutService","fetchAuthPostService","loggedInStatus","samlAuthWindow","samlCompletionPromise","sessionInfo","releaseVersion","SSO_REDIRECTION_MARKER_GUID","EndPoints","AUTH_VERIFICATION","SAML_LOGIN_TEMPLATE","targetUrl","OIDC_LOGIN_TEMPLATE","TOKEN_LOGIN","BASIC_LOGIN","LOGOUT","AuthFailureType","AuthStatus","isLoggedIn","thoughtSpotHost","authVerificationUrl","response","json","sessionInfoResp","status","getReleaseVersion","getSessionInfo","initSession","sessionDetails","DUPLICATE_TOKEN_ERR","prevAuthToken","alertForDuplicateToken","authtoken","alert","Error","isAtSSORedirectUrl","window","location","href","indexOf","removeSSORedirectUrlMarker","hash","replace","doTokenAuth","embedConfig","username","authEndpoint","getAuthToken","authToken","text","resp","ok","type","detectCookieAccessSlow","doBasicAuth","password","loggedIn","samlPopupFlow","ssoURL","triggerContainer","triggerText","containerEl","innerHTML","authElem","document","getElementById","textContent","Promise","resolve","reject","addEventListener","e","data","SAMLComplete","source","close","closed","open","focus","once","doSSOAuth","ssoEndPoint","noRedirect","inPopup","authTriggerContainer","authTriggerText","doSamlAuth","ssoRedirectUrl","redirectPath","encodeURIComponent","doOIDCAuth","logout","authenticate","authType","SSO","SAMLRedirect","SAML","OIDC","OIDCRedirect","AuthServer","TrustedAuthToken","Basic","isAuthenticated"],"sourceRoot":"","sources":["../../src/auth.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}