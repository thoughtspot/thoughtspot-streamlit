{"ast":null,"code":"import{Streamlit,withStreamlitConnection}from\"streamlit-component-lib\";import{SearchEmbed,AuthType,init,LiveboardEmbed}from'@thoughtspot/visual-embed-sdk';import React,{useEffect}from\"react\";/**\n * This is a React-based component template. The `render()` function is called\n * automatically when your component should be re-rendered.\n */function ThoughtspotSearchComponent(_ref){var args=_ref.args;var component=args[\"component\"];var host=args[\"host\"];var sso=Object.keys(args).includes(\"sso\")?args[\"sso\"]:false;var height=Object.keys(args).includes(\"height\")?args[\"height\"]:600;var width=Object.keys(args).includes(\"width\")?args[\"width\"]:1000;var dataSources=Object.keys(args).includes(\"datasources\")?args[\"datasources\"]:[];var searchString=Object.keys(args).includes(\"searchstring\")?args[\"searchstring\"]:null;var liveboardId=Object.keys(args).includes(\"liveboardid\")?args[\"liveboardid\"]:null;var vizId=Object.keys(args).includes(\"vizid\")?args[\"vizid\"]:null;Streamlit.setFrameHeight(height);init({thoughtSpotHost:host,authType:sso?AuthType.SAML:AuthType.None});useEffect(function(){var element=document.getElementById('ts-embed');if(component==\"search\"){var searchEmbed=new SearchEmbed(element,{searchOptions:{searchTokenString:searchString,executeSearch:true},dataSources:dataSources,frameParams:{width:width+\"px\",height:height+\"px\"}});searchEmbed.render();}else{var liveboardembed=new LiveboardEmbed(element,{liveboardId:liveboardId,vizId:vizId,frameParams:{width:width+\"px\",height:height+\"px\"}});liveboardembed.render();}});return/*#__PURE__*/React.createElement(\"div\",{style:{width:width+\"px\",height:height+\"px\"},id:\"ts-embed\"},\"TS Embed\");}// \"withStreamlitConnection\" is a wrapper function. It bootstraps the\n// connection between your component and the Streamlit app, and handles\n// passing arguments from Python -> Component.\n//\n// You don't need to edit withStreamlitConnection (but you're welcome to!).\nexport default withStreamlitConnection(ThoughtspotSearchComponent);","map":{"version":3,"names":["Streamlit","withStreamlitConnection","SearchEmbed","AuthType","init","LiveboardEmbed","React","useEffect","ThoughtspotSearchComponent","args","component","host","sso","Object","keys","includes","height","width","dataSources","searchString","liveboardId","vizId","setFrameHeight","thoughtSpotHost","authType","SAML","None","element","document","getElementById","searchEmbed","searchOptions","searchTokenString","executeSearch","frameParams","render","liveboardembed"],"sources":["/Users/nathan.schroeder/Documents/dev/template/thoughtspot-streamlit/frontend/src/ThoughtspotSearchComponent.tsx"],"sourcesContent":["import {\n  Streamlit,\n  StreamlitComponentBase,\n  withStreamlitConnection,\n  ComponentProps\n} from \"streamlit-component-lib\"\nimport {\n  SearchEmbed,\n  AuthType,\n  init,\n  prefetch,\n  EmbedEvent,\n  HostEvent,\n  LiveboardEmbed\n}\nfrom '@thoughtspot/visual-embed-sdk';\nimport React, {useEffect, ReactElement, ReactNode} from \"react\"\n\n\ninterface State {\n  numClicks: number\n  isFocused: boolean\n}\n\n/**\n * This is a React-based component template. The `render()` function is called\n * automatically when your component should be re-rendered.\n */\n\n\n function ThoughtspotSearchComponent({args}: ComponentProps): ReactElement {\n\n  let component = args[\"component\"]\n\n  let host = args[\"host\"];\n  let sso = Object.keys(args).includes(\"sso\") ? args[\"sso\"] : false\n  let height = Object.keys(args).includes(\"height\") ? args[\"height\"] : 600\n  let width = Object.keys(args).includes(\"width\") ? args[\"width\"] : 1000\n  let dataSources = Object.keys(args).includes(\"datasources\") ? args[\"datasources\"] : []\n  let searchString = Object.keys(args).includes(\"searchstring\") ? args[\"searchstring\"] : null\n\n  let liveboardId : string = Object.keys(args).includes(\"liveboardid\") ? args[\"liveboardid\"] : null\n  let vizId :string = Object.keys(args).includes(\"vizid\") ? args[\"vizid\"] : null\n\n  Streamlit.setFrameHeight(height)\n\n  \n  init({\n    thoughtSpotHost: host,\n    authType: sso ? AuthType.SAML : AuthType.None,\n  });\n\n  useEffect(()=>{\n    var element : any =  document.getElementById('ts-embed');\n\n    if (component == \"search\"){\n      const searchEmbed = new SearchEmbed(element, {\n        searchOptions:{\n          searchTokenString:searchString,\n          executeSearch:true\n        },\n        dataSources: dataSources,\n        frameParams: {\n            width: width+\"px\",\n            height: height+\"px\",\n        },\n      });\n      searchEmbed.render()\n    }else{\n      const liveboardembed = new LiveboardEmbed(element, {\n        liveboardId: liveboardId,\n        vizId: vizId,\n        frameParams: {\n            width: width+\"px\",\n            height: height+\"px\",\n        },\n      });\n      liveboardembed.render()\n    }\n\n    })\n    return (\n      <div style={{width:width+\"px\",height:height+\"px\"}} id=\"ts-embed\">\n        TS Embed\n      </div>  \n    )\n }\n\n// \"withStreamlitConnection\" is a wrapper function. It bootstraps the\n// connection between your component and the Streamlit app, and handles\n// passing arguments from Python -> Component.\n//\n// You don't need to edit withStreamlitConnection (but you're welcome to!).\nexport default withStreamlitConnection(ThoughtspotSearchComponent)\n"],"mappings":"AAAA,OACEA,SADF,CAGEC,uBAHF,KAKO,yBALP,CAMA,OACEC,WADF,CAEEC,QAFF,CAGEC,IAHF,CAOEC,cAPF,KASK,+BATL,CAUA,MAAOC,MAAP,EAAeC,SAAf,KAAwD,OAAxD,CAQA;AACA;AACA;AACA,GAGC,QAASC,2BAAT,MAA0E,IAArCC,KAAqC,MAArCA,IAAqC,CAEzE,GAAIC,UAAS,CAAGD,IAAI,CAAC,WAAD,CAApB,CAEA,GAAIE,KAAI,CAAGF,IAAI,CAAC,MAAD,CAAf,CACA,GAAIG,IAAG,CAAGC,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,KAA3B,EAAoCN,IAAI,CAAC,KAAD,CAAxC,CAAkD,KAA5D,CACA,GAAIO,OAAM,CAAGH,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,QAA3B,EAAuCN,IAAI,CAAC,QAAD,CAA3C,CAAwD,GAArE,CACA,GAAIQ,MAAK,CAAGJ,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,OAA3B,EAAsCN,IAAI,CAAC,OAAD,CAA1C,CAAsD,IAAlE,CACA,GAAIS,YAAW,CAAGL,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,aAA3B,EAA4CN,IAAI,CAAC,aAAD,CAAhD,CAAkE,EAApF,CACA,GAAIU,aAAY,CAAGN,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,cAA3B,EAA6CN,IAAI,CAAC,cAAD,CAAjD,CAAoE,IAAvF,CAEA,GAAIW,YAAoB,CAAGP,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,aAA3B,EAA4CN,IAAI,CAAC,aAAD,CAAhD,CAAkE,IAA7F,CACA,GAAIY,MAAa,CAAGR,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,OAA3B,EAAsCN,IAAI,CAAC,OAAD,CAA1C,CAAsD,IAA1E,CAEAT,SAAS,CAACsB,cAAV,CAAyBN,MAAzB,EAGAZ,IAAI,CAAC,CACHmB,eAAe,CAAEZ,IADd,CAEHa,QAAQ,CAAEZ,GAAG,CAAGT,QAAQ,CAACsB,IAAZ,CAAmBtB,QAAQ,CAACuB,IAFtC,CAAD,CAAJ,CAKAnB,SAAS,CAAC,UAAI,CACZ,GAAIoB,QAAa,CAAIC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAArB,CAEA,GAAInB,SAAS,EAAI,QAAjB,CAA0B,CACxB,GAAMoB,YAAW,CAAG,GAAI5B,YAAJ,CAAgByB,OAAhB,CAAyB,CAC3CI,aAAa,CAAC,CACZC,iBAAiB,CAACb,YADN,CAEZc,aAAa,CAAC,IAFF,CAD6B,CAK3Cf,WAAW,CAAEA,WAL8B,CAM3CgB,WAAW,CAAE,CACTjB,KAAK,CAAEA,KAAK,CAAC,IADJ,CAETD,MAAM,CAAEA,MAAM,CAAC,IAFN,CAN8B,CAAzB,CAApB,CAWAc,WAAW,CAACK,MAAZ,GACD,CAbD,IAaK,CACH,GAAMC,eAAc,CAAG,GAAI/B,eAAJ,CAAmBsB,OAAnB,CAA4B,CACjDP,WAAW,CAAEA,WADoC,CAEjDC,KAAK,CAAEA,KAF0C,CAGjDa,WAAW,CAAE,CACTjB,KAAK,CAAEA,KAAK,CAAC,IADJ,CAETD,MAAM,CAAEA,MAAM,CAAC,IAFN,CAHoC,CAA5B,CAAvB,CAQAoB,cAAc,CAACD,MAAf,GACD,CAEA,CA5BM,CAAT,CA6BE,mBACE,2BAAK,KAAK,CAAE,CAAClB,KAAK,CAACA,KAAK,CAAC,IAAb,CAAkBD,MAAM,CAACA,MAAM,CAAC,IAAhC,CAAZ,CAAmD,EAAE,CAAC,UAAtD,aADF,CAKF,CAEF;AACA;AACA;AACA;AACA;AACA,cAAef,wBAAuB,CAACO,0BAAD,CAAtC"},"metadata":{},"sourceType":"module"}