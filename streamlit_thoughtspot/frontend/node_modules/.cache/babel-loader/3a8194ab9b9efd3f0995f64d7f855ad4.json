{"ast":null,"code":"import{Streamlit,withStreamlitConnection}from\"streamlit-component-lib\";import{SearchEmbed,AuthType,init,LiveboardEmbed}from'@thoughtspot/visual-embed-sdk';import React,{useEffect}from\"react\";/**\n * This is a React-based component template. The `render()` function is called\n * automatically when your component should be re-rendered.\n */function ThoughtspotSearchComponent(_ref){var args=_ref.args;var component=args[\"component\"];var host=args[\"host\"];var sso=Object.keys(args).includes(\"sso\")?args[\"sso\"]:false;var height=Object.keys(args).includes(\"height\")?args[\"height\"]:600;var width=Object.keys(args).includes(\"width\")?args[\"width\"]:1000;var dataSources=Object.keys(args).includes(\"datasources\")?args[\"datasources\"]:[];var searchString=Object.keys(args).includes(\"searchstring\")?args[\"searchstring\"]:null;var answerId=Object.keys(args).includes(\"answerid\")?args[\"answerid\"]:null;var liveboardId=Object.keys(args).includes(\"liveboardid\")?args[\"liveboardid\"]:null;var vizId=Object.keys(args).includes(\"vizid\")?args[\"vizid\"]:null;Streamlit.setFrameHeight(height);console.log(\"version 0.0.3 - \",answerId,\" - \",searchString,\" - \",dataSources);init({thoughtSpotHost:host,authType:sso?AuthType.SAML:AuthType.None});useEffect(function(){var element=document.getElementById('ts-embed');if(component==\"search\"){var searchEmbed=new SearchEmbed(element,{searchOptions:{searchTokenString:searchString,executeSearch:true},collapseDataSources:answerId?true:false,answerId:answerId,dataSources:dataSources,frameParams:{width:width+\"px\",height:height+\"px\"}});searchEmbed.render();}else{var liveboardembed=new LiveboardEmbed(element,{liveboardId:liveboardId,vizId:vizId,frameParams:{width:width+\"px\",height:height+\"px\"}});liveboardembed.render();}});return/*#__PURE__*/React.createElement(\"div\",{style:{width:width+\"px\",height:height+\"px\"},id:\"ts-embed\"},\"TS Embed\");}// \"withStreamlitConnection\" is a wrapper function. It bootstraps the\n// connection between your component and the Streamlit app, and handles\n// passing arguments from Python -> Component.\n//1\n// You don't need to edit withStreamlitConnection (but you're welcome to!).\nexport default withStreamlitConnection(ThoughtspotSearchComponent);","map":{"version":3,"names":["Streamlit","withStreamlitConnection","SearchEmbed","AuthType","init","LiveboardEmbed","React","useEffect","ThoughtspotSearchComponent","args","component","host","sso","Object","keys","includes","height","width","dataSources","searchString","answerId","liveboardId","vizId","setFrameHeight","console","log","thoughtSpotHost","authType","SAML","None","element","document","getElementById","searchEmbed","searchOptions","searchTokenString","executeSearch","collapseDataSources","frameParams","render","liveboardembed"],"sources":["/Users/nathan.schroeder/Documents/dev/template/streamlit_thoughtspot/frontend/src/ThoughtspotSearchComponent.tsx"],"sourcesContent":["import {\n  Streamlit,\n  StreamlitComponentBase,\n  withStreamlitConnection,\n  ComponentProps\n} from \"streamlit-component-lib\"\nimport {\n  SearchEmbed,\n  AuthType,\n  init,\n  prefetch,\n  EmbedEvent,\n  HostEvent,\n  LiveboardEmbed\n}\nfrom '@thoughtspot/visual-embed-sdk';\nimport React, {useEffect, ReactElement, ReactNode} from \"react\"\n\n\ninterface State {\n  numClicks: number\n  isFocused: boolean\n}\n\n/**\n * This is a React-based component template. The `render()` function is called\n * automatically when your component should be re-rendered.\n */\n\n\n function ThoughtspotSearchComponent({args}: ComponentProps): ReactElement {\n\n  let component = args[\"component\"]\n\n  let host = args[\"host\"];\n  let sso = Object.keys(args).includes(\"sso\") ? args[\"sso\"] : false\n  let height = Object.keys(args).includes(\"height\") ? args[\"height\"] : 600\n  let width = Object.keys(args).includes(\"width\") ? args[\"width\"] : 1000\n  let dataSources = Object.keys(args).includes(\"datasources\") ? args[\"datasources\"] : []\n  let searchString = Object.keys(args).includes(\"searchstring\") ? args[\"searchstring\"] : null\n  \n  let answerId = Object.keys(args).includes(\"answerid\") ? args[\"answerid\"] : null\n\n  let liveboardId : string = Object.keys(args).includes(\"liveboardid\") ? args[\"liveboardid\"] : null\n  let vizId :string = Object.keys(args).includes(\"vizid\") ? args[\"vizid\"] : null\n\n  Streamlit.setFrameHeight(height)\n  console.log(\"version 0.0.3 - \",answerId,\" - \",searchString,\" - \",dataSources)\n  \n  init({\n    thoughtSpotHost: host,\n    authType: sso ? AuthType.SAML : AuthType.None,\n  });\n\n  useEffect(()=>{\n    var element : any =  document.getElementById('ts-embed');\n    if (component == \"search\"){\n      const searchEmbed = new SearchEmbed(element, {\n        searchOptions:{\n          searchTokenString:searchString,\n          executeSearch:true\n        },\n        collapseDataSources: answerId ? true : false,\n        answerId: answerId,\n        dataSources: dataSources,\n        frameParams: {\n            width: width+\"px\",\n            height: height+\"px\",\n        },\n      });\n      searchEmbed.render()\n    }else{\n      const liveboardembed = new LiveboardEmbed(element, {\n        liveboardId: liveboardId,\n        vizId: vizId,\n        frameParams: {\n            width: width+\"px\",\n            height: height+\"px\",\n        },\n      });\n      liveboardembed.render()\n    }\n\n    })\n    return (\n      <div style={{width:width+\"px\",height:height+\"px\"}} id=\"ts-embed\">\n        TS Embed\n      </div>  \n    )\n }\n\n// \"withStreamlitConnection\" is a wrapper function. It bootstraps the\n// connection between your component and the Streamlit app, and handles\n// passing arguments from Python -> Component.\n//1\n// You don't need to edit withStreamlitConnection (but you're welcome to!).\nexport default withStreamlitConnection(ThoughtspotSearchComponent)\n"],"mappings":"AAAA,OACEA,SADF,CAGEC,uBAHF,KAKO,yBALP,CAMA,OACEC,WADF,CAEEC,QAFF,CAGEC,IAHF,CAOEC,cAPF,KASK,+BATL,CAUA,MAAOC,MAAP,EAAeC,SAAf,KAAwD,OAAxD,CAQA;AACA;AACA;AACA,GAGC,QAASC,2BAAT,MAA0E,IAArCC,KAAqC,MAArCA,IAAqC,CAEzE,GAAIC,UAAS,CAAGD,IAAI,CAAC,WAAD,CAApB,CAEA,GAAIE,KAAI,CAAGF,IAAI,CAAC,MAAD,CAAf,CACA,GAAIG,IAAG,CAAGC,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,KAA3B,EAAoCN,IAAI,CAAC,KAAD,CAAxC,CAAkD,KAA5D,CACA,GAAIO,OAAM,CAAGH,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,QAA3B,EAAuCN,IAAI,CAAC,QAAD,CAA3C,CAAwD,GAArE,CACA,GAAIQ,MAAK,CAAGJ,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,OAA3B,EAAsCN,IAAI,CAAC,OAAD,CAA1C,CAAsD,IAAlE,CACA,GAAIS,YAAW,CAAGL,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,aAA3B,EAA4CN,IAAI,CAAC,aAAD,CAAhD,CAAkE,EAApF,CACA,GAAIU,aAAY,CAAGN,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,cAA3B,EAA6CN,IAAI,CAAC,cAAD,CAAjD,CAAoE,IAAvF,CAEA,GAAIW,SAAQ,CAAGP,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,UAA3B,EAAyCN,IAAI,CAAC,UAAD,CAA7C,CAA4D,IAA3E,CAEA,GAAIY,YAAoB,CAAGR,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,aAA3B,EAA4CN,IAAI,CAAC,aAAD,CAAhD,CAAkE,IAA7F,CACA,GAAIa,MAAa,CAAGT,MAAM,CAACC,IAAP,CAAYL,IAAZ,EAAkBM,QAAlB,CAA2B,OAA3B,EAAsCN,IAAI,CAAC,OAAD,CAA1C,CAAsD,IAA1E,CAEAT,SAAS,CAACuB,cAAV,CAAyBP,MAAzB,EACAQ,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAA+BL,QAA/B,CAAwC,KAAxC,CAA8CD,YAA9C,CAA2D,KAA3D,CAAiED,WAAjE,EAEAd,IAAI,CAAC,CACHsB,eAAe,CAAEf,IADd,CAEHgB,QAAQ,CAAEf,GAAG,CAAGT,QAAQ,CAACyB,IAAZ,CAAmBzB,QAAQ,CAAC0B,IAFtC,CAAD,CAAJ,CAKAtB,SAAS,CAAC,UAAI,CACZ,GAAIuB,QAAa,CAAIC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAArB,CACA,GAAItB,SAAS,EAAI,QAAjB,CAA0B,CACxB,GAAMuB,YAAW,CAAG,GAAI/B,YAAJ,CAAgB4B,OAAhB,CAAyB,CAC3CI,aAAa,CAAC,CACZC,iBAAiB,CAAChB,YADN,CAEZiB,aAAa,CAAC,IAFF,CAD6B,CAK3CC,mBAAmB,CAAEjB,QAAQ,CAAG,IAAH,CAAU,KALI,CAM3CA,QAAQ,CAAEA,QANiC,CAO3CF,WAAW,CAAEA,WAP8B,CAQ3CoB,WAAW,CAAE,CACTrB,KAAK,CAAEA,KAAK,CAAC,IADJ,CAETD,MAAM,CAAEA,MAAM,CAAC,IAFN,CAR8B,CAAzB,CAApB,CAaAiB,WAAW,CAACM,MAAZ,GACD,CAfD,IAeK,CACH,GAAMC,eAAc,CAAG,GAAInC,eAAJ,CAAmByB,OAAnB,CAA4B,CACjDT,WAAW,CAAEA,WADoC,CAEjDC,KAAK,CAAEA,KAF0C,CAGjDgB,WAAW,CAAE,CACTrB,KAAK,CAAEA,KAAK,CAAC,IADJ,CAETD,MAAM,CAAEA,MAAM,CAAC,IAFN,CAHoC,CAA5B,CAAvB,CAQAwB,cAAc,CAACD,MAAf,GACD,CAEA,CA7BM,CAAT,CA8BE,mBACE,2BAAK,KAAK,CAAE,CAACtB,KAAK,CAACA,KAAK,CAAC,IAAb,CAAkBD,MAAM,CAACA,MAAM,CAAC,IAAhC,CAAZ,CAAmD,EAAE,CAAC,UAAtD,aADF,CAKF,CAEF;AACA;AACA;AACA;AACA;AACA,cAAef,wBAAuB,CAACO,0BAAD,CAAtC"},"metadata":{},"sourceType":"module"}