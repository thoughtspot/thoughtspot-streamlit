{"ast":null,"code":"import { OperationType } from '../types';\nexport function getAnswerServiceInstance(session, query, operation, thoughtSpotHost) {\n  let variable;\n\n  const fetchQuery = async variables => {\n    try {\n      const response = await fetch(`${thoughtSpotHost}/prism/?op=${operation}`, {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json;charset=UTF-8',\n          'x-requested-by': 'ThoughtSpot',\n          accept: '*/*',\n          'accept-language': 'en-us'\n        },\n        body: JSON.stringify({\n          operationName: operation,\n          query,\n          variables\n        }),\n        credentials: 'include'\n      });\n      const result = await response.json();\n      return result.data;\n    } catch (error) {\n      return error;\n    }\n  };\n\n  const fetchData = (offset, batchSize) => {\n    if (operation === OperationType.GetChartWithData) {\n      variable = {\n        batchSize,\n        offset: offset * batchSize\n      };\n    } else {\n      variable = {\n        dataPaginationParams: {\n          isClientPaginated: true,\n          offset: offset * batchSize,\n          size: batchSize\n        }\n      };\n    }\n\n    return fetchQuery({\n      session,\n      ...variable\n    });\n  };\n\n  return {\n    fetchData\n  };\n}","map":{"version":3,"mappings":"AAAA,SAA2BA,aAA3B,QAAgD,UAAhD;AAEA,OAAM,SAAUC,wBAAV,CACFC,OADE,EAEFC,KAFE,EAGFC,SAHE,EAIFC,eAJE,EAIqB;EAEvB,IAAIC,QAAJ;;EAEA,MAAMC,UAAU,GAAG,MAAOC,SAAP,IAAyB;IACxC,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CACxB,GAAGL,eAAe,cAAcD,SAAS,EADjB,EAExB;QACIO,MAAM,EAAE,MADZ;QAEIC,OAAO,EAAE;UACL,gBAAgB,gCADX;UAEL,kBAAkB,aAFb;UAGLC,MAAM,EAAE,KAHH;UAIL,mBAAmB;QAJd,CAFb;QAQIC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;UACjBC,aAAa,EAAEb,SADE;UAEjBD,KAFiB;UAGjBK;QAHiB,CAAf,CARV;QAaIU,WAAW,EAAE;MAbjB,CAFwB,CAA5B;MAkBA,MAAMC,MAAM,GAAG,MAAMV,QAAQ,CAACW,IAAT,EAArB;MACA,OAAOD,MAAM,CAACE,IAAd;IACH,CArBD,CAqBE,OAAOC,KAAP,EAAc;MACZ,OAAOA,KAAP;IACH;EACJ,CAzBD;;EA2BA,MAAMC,SAAS,GAAG,CAACC,MAAD,EAAiBC,SAAjB,KAAsC;IACpD,IAAIrB,SAAS,KAAKJ,aAAa,CAAC0B,gBAAhC,EAAkD;MAC9CpB,QAAQ,GAAG;QAAEmB,SAAF;QAAaD,MAAM,EAAEA,MAAM,GAAGC;MAA9B,CAAX;IACH,CAFD,MAEO;MACHnB,QAAQ,GAAG;QACPqB,oBAAoB,EAAE;UAClBC,iBAAiB,EAAE,IADD;UAElBJ,MAAM,EAAEA,MAAM,GAAGC,SAFC;UAGlBI,IAAI,EAAEJ;QAHY;MADf,CAAX;IAOH;;IACD,OAAOlB,UAAU,CAAC;MACdL,OADc;MAEd,GAAGI;IAFW,CAAD,CAAjB;EAIH,CAhBD;;EAkBA,OAAO;IACHiB;EADG,CAAP;AAGH","names":["OperationType","getAnswerServiceInstance","session","query","operation","thoughtSpotHost","variable","fetchQuery","variables","response","fetch","method","headers","accept","body","JSON","stringify","operationName","credentials","result","json","data","error","fetchData","offset","batchSize","GetChartWithData","dataPaginationParams","isClientPaginated","size"],"sourceRoot":"","sources":["../../../src/utils/answerService.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}